<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Provides gzip header information for when a gzip stream is requested by `deflateInit2_`."><title>deflateSetHeader in libz_rs_sys - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="libz_rs_sys" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../libz_rs_sys/index.html">libz_<wbr>rs_<wbr>sys</a><span class="version">0.5.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">deflate<wbr>SetHeader</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#returns" title="Returns">Returns</a></li><li><a href="#safety" title="Safety">Safety</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate libz_<wbr>rs_<wbr>sys</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">libz_rs_sys</a></div><h1>Function <span class="fn">deflateSetHeader</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/libz_rs_sys/lib.rs.html#972-980">Source</a> </span></div><pre class="rust item-decl"><code>pub unsafe extern &quot;C-unwind&quot; fn deflateSetHeader(
    strm: <a class="primitive" href="https://doc.rust-lang.org/1.88.0/std/primitive.pointer.html">*mut </a><a class="struct" href="struct.z_stream.html" title="struct libz_rs_sys::z_stream">z_stream</a>,
    head: <a class="type" href="type.gz_headerp.html" title="type libz_rs_sys::gz_headerp">gz_headerp</a>,
) -&gt; <a class="type" href="https://doc.rust-lang.org/1.88.0/core/ffi/primitives/type.c_int.html" title="type core::ffi::primitives::c_int">c_int</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Provides gzip header information for when a gzip stream is requested by <a href="fn.deflateInit2_.html" title="fn libz_rs_sys::deflateInit2_"><code>deflateInit2_</code></a>.</p>
<p><a href="fn.deflateSetHeader.html" title="fn libz_rs_sys::deflateSetHeader"><code>deflateSetHeader</code></a> may be called after <a href="fn.deflateInit2_.html" title="fn libz_rs_sys::deflateInit2_"><code>deflateInit2_</code></a> or <a href="fn.deflateReset.html" title="fn libz_rs_sys::deflateReset"><code>deflateReset</code></a>) and before the first call of <a href="fn.deflate.html" title="fn libz_rs_sys::deflate"><code>deflate</code></a>. The header’s <code>text</code>, <code>time</code>, <code>os</code>, <code>extra</code>, <code>name</code>, and <code>comment</code> fields in the provided <a href="struct.gz_header.html" title="struct libz_rs_sys::gz_header"><code>gz_header</code></a> structure are written to the gzip header (xflag is ignored — the extra flags are set according to the compression level).</p>
<p>The caller must assure that, if not <code>NULL</code>, <code>name</code> and <code>comment</code> are terminated with a zero byte, and that if <code>extra</code> is not NULL, that <code>extra_len</code> bytes are available there.
If <code>hcrc</code> is true, a gzip header crc is included.</p>
<p>If <a href="fn.deflateSetHeader.html" title="fn libz_rs_sys::deflateSetHeader"><code>deflateSetHeader</code></a> is not used, the default gzip header has text false, the time set to zero, and os set to the current operating system, with no extra, name, or comment fields. The gzip header is returned to the default state by <a href="fn.deflateReset.html" title="fn libz_rs_sys::deflateReset"><code>deflateReset</code></a>.</p>
<h2 id="returns"><a class="doc-anchor" href="#returns">§</a>Returns</h2>
<ul>
<li><a href="constant.Z_OK.html" title="constant libz_rs_sys::Z_OK"><code>Z_OK</code></a> if success</li>
<li><a href="constant.Z_STREAM_ERROR.html" title="constant libz_rs_sys::Z_STREAM_ERROR"><code>Z_STREAM_ERROR</code></a> if the stream state was inconsistent</li>
</ul>
<h2 id="safety"><a class="doc-anchor" href="#safety">§</a>Safety</h2>
<ul>
<li>Either
<ul>
<li><code>strm</code> is <code>NULL</code></li>
<li><code>strm</code> satisfies the requirements of <code>&amp;mut *strm</code> and was initialized with <a href="fn.deflateInit_.html" title="fn libz_rs_sys::deflateInit_"><code>deflateInit_</code></a> or similar</li>
</ul>
</li>
<li>Either
<ul>
<li><code>head</code> is <code>NULL</code></li>
<li><code>head</code> satisfies the requirements of <code>&amp;mut *head</code> and satisfies the following:
<ul>
<li><code>head.extra</code> is <code>NULL</code> or is readable for at least <code>head.extra_len</code> bytes</li>
<li><code>head.name</code> is <code>NULL</code> or satisfies the requirements of <a href="https://doc.rust-lang.org/1.88.0/core/ffi/c_str/struct.CStr.html#method.from_ptr" title="associated function core::ffi::c_str::CStr::from_ptr"><code>core::ffi::CStr::from_ptr</code></a></li>
<li><code>head.comment</code> is <code>NULL</code> or satisfies the requirements of <a href="https://doc.rust-lang.org/1.88.0/core/ffi/c_str/struct.CStr.html#method.from_ptr" title="associated function core::ffi::c_str::CStr::from_ptr"><code>core::ffi::CStr::from_ptr</code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></details></section></div></main></body></html>