<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Advisory reader-writer locks for files."><title>fd_lock - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-dd39b87e5fcfba68.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="fd_lock" data-themes="" data-resource-suffix="" data-rustdoc-version="1.80.1 (3f5fd8dd4 2024-08-06)" data-channel="1.80.1" data-search-js="search-d52510db62a78183.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../fd_lock/index.html">fd_lock</a><span class="version">4.0.2</span></h2></div><div class="sidebar-elems"><ul class="block"><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#structs">Structs</a></li></ul></section></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">fd_lock</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../src/fd_lock/lib.rs.html#1-43">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Advisory reader-writer locks for files.</p>
<h2 id="notes-on-advisory-locks"><a class="doc-anchor" href="#notes-on-advisory-locks">§</a>Notes on Advisory Locks</h2>
<p>“advisory locks” are locks which programs must opt-in to adhere to. This
means that they can be used to coordinate file access, but not prevent
access. Use this to coordinate file access between multiple instances of the
same program. But do not use this to prevent actors from accessing or
modifying files.</p>
<h2 id="example"><a class="doc-anchor" href="#example">§</a>Example</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>std::io::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>std::fs::File;
<span class="kw">use </span>fd_lock::RwLock;

<span class="comment">// Lock a file and write to it.
</span><span class="kw">let </span><span class="kw-2">mut </span>f = RwLock::new(File::open(<span class="string">"foo.txt"</span>)<span class="question-mark">?</span>);
<span class="macro">write!</span>(f.write()<span class="question-mark">?</span>, <span class="string">"chashu cat"</span>)<span class="question-mark">?</span>;

<span class="comment">// A lock can also be held across multiple operations.
</span><span class="kw">let </span><span class="kw-2">mut </span>f = f.write()<span class="question-mark">?</span>;
<span class="macro">write!</span>(f, <span class="string">"nori cat"</span>)<span class="question-mark">?</span>;
<span class="macro">write!</span>(f, <span class="string">"bird!"</span>)<span class="question-mark">?</span>;</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.RwLock.html" title="struct fd_lock::RwLock">RwLock</a></div><div class="desc docblock-short">Advisory reader-writer lock for files.</div></li><li><div class="item-name"><a class="struct" href="struct.RwLockReadGuard.html" title="struct fd_lock::RwLockReadGuard">RwLockReadGuard</a></div><div class="desc docblock-short">RAII structure used to release the shared read access of a lock when
dropped.</div></li><li><div class="item-name"><a class="struct" href="struct.RwLockWriteGuard.html" title="struct fd_lock::RwLockWriteGuard">RwLockWriteGuard</a></div><div class="desc docblock-short">RAII structure used to release the exclusive write access of a lock when
dropped.</div></li></ul></section></div></main></body></html>